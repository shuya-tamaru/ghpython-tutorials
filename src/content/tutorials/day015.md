---
day: Day 15
title: ã‚¹ãƒ‘ã‚¤ãƒ©ãƒ«çŠ¶ã«å›è»¢ï¼‹æ‹¡å¤§ã™ã‚‹Arc - æŠ˜ã‚Šè¾¼ã‚€
difficulty: 3.5
tags: [curve, transform, 3d, structure]
---

## âœ… Inputs

- arc_angle_deg: float â€“ å…ƒã®Arcã®é–‹ãè§’åº¦ï¼ˆåº¦ï¼‰
- num_copies: int â€“ Arcã‚’è¤‡è£½ã™ã‚‹æ•°
- total_rotation_deg: float â€“ å…¨ä½“ã§å›è»¢ã™ã‚‹è§’åº¦ï¼ˆåº¦ï¼‰
- final_scale: float â€“ æœ€å¾Œã®Arcã®ã‚¹ã‚±ãƒ¼ãƒ«å€ç‡ï¼ˆæœ€åˆã¯1.0ï¼‰
- radius: float â€“ å…ƒã®Arcã®åŠå¾„
- offset: float â€“ å†…å´ã¸ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆè·é›¢
- start_angle_degree: float â€“ Arcã®é–‹å§‹è§’åº¦ï¼ˆåº¦ï¼‰
- end_angle_degree: float â€“ Arcã®çµ‚äº†è§’åº¦ï¼ˆåº¦ï¼‰

## âœ… Outputs

- results: list of Brep â€“ äºŒé‡æ§‹é€ ã®Loftã§ç”Ÿæˆã•ã‚ŒãŸã‚·ã‚§ãƒ«å½¢çŠ¶ç¾¤

## âœ… Code

```python
# === ğŸ”§ å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¾‹ ===
# num_copies = 50 
# total_rotation_deg = 500
# final_scale = 4.5
# radius = 100.0   
# offset = 50.0
# start_angle_degree = -30
# end_angle_degree = 90

import Rhino.Geometry as rg
import math


plane_xz = rg.Plane.WorldZX
circle = rg.Circle(plane_xz, radius)

start_angle = math.radians(start_angle_degree)
end_angle = math.radians(end_angle_degree)
interval = rg.Interval(start_angle, end_angle)

arc = rg.Arc(circle, interval).ToNurbsCurve()

# === ğŸ” Step 2 & 3: å›è»¢ + ã‚¹ã‚±ãƒ¼ãƒ«è¤‡è£½ ===
arcs = []
origin = rg.Point3d(0, 0, 0)
angle_step = math.radians(total_rotation_deg / num_copies)

for i in range(num_copies):
    # å›è»¢è§’
    angle = i * angle_step

    # ã‚¹ã‚±ãƒ¼ãƒ«ä¿‚æ•°ï¼ˆç·šå½¢è£œé–“ï¼‰
    t = float(i) / (num_copies - 1)
    scale_factor = 1.0 + (final_scale - 1.0) * t

    # ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒ 
    rot = rg.Transform.Rotation(angle, origin)
    scale = rg.Transform.Scale(origin, scale_factor)

    # Arcã®è¤‡è£½ãƒ»å¤‰å½¢
    arc_copy = arc.DuplicateCurve()
    arc_copy.Transform(scale)
    arc_copy.Transform(rot)

    arcs.append(arc_copy)

# === ğŸ“ ã‚ªãƒ•ã‚»ãƒƒãƒˆå‡¦ç† ===
offset_arcs = []
for a in arcs:
    offsets = a.Offset(rg.Plane.WorldXY, -offset, 0.001, rg.CurveOffsetCornerStyle.Sharp)
    if offsets and len(offsets) > 0:
        offset_arcs.append(offsets[0])

# === ğŸ”„ Shiftå‡¦ç† ===
shifted_arcs = arcs[1:]  # wrapã—ãªã„

# === ğŸ—ï¸ äºŒé‡æ§‹é€ Loftå‡¦ç† ===
loft_breps = []

# 1. shifted_arcs Ã— offset_arcs[:-1]
for i in range(len(shifted_arcs)):
    c1 = shifted_arcs[i]
    c2 = offset_arcs[i]
    breps = rg.Brep.CreateFromLoft([c1, c2], rg.Point3d.Unset, rg.Point3d.Unset, rg.LoftType.Normal, False)
    if breps: loft_breps.append(breps[0])

# 2. arcs Ã— offset_arcs[:-1]
for i in range(len(arcs) - 1):
    c1 = arcs[i]
    c2 = offset_arcs[i]
    breps = rg.Brep.CreateFromLoft([c1, c2], rg.Point3d.Unset, rg.Point3d.Unset, rg.LoftType.Normal, False)
    if breps: loft_breps.append(breps[0])

results = loft_breps
``` 