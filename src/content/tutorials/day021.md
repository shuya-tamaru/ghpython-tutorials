---
day: Day 21
title: çƒä½“ã®ç·¨ã¿æ§‹é€ 
difficulty: 3.5
tags: [sphere, weave, wave, polar, 3d]
---

## âœ… Inputs

- radius: float â€“ çƒã®åŠå¾„
- amp: float â€“ ç¸¦æ–¹å‘ï¼ˆçµŒç·šæ–¹å‘ï¼‰ã®æ³¢ã®æŒ¯å¹…
- wave_cycles: int â€“ ç¸¦æ–¹å‘ã®æ³¢ã®ç¹°ã‚Šè¿”ã—æ•°ï¼ˆå±±ã¨è°·ã®æ•°ã¯ã“ã‚Œã®2å€ï¼‰
- res_theta: int â€“ çµŒç·šæ–¹å‘ã®åˆ†å‰²æ•°
- res_curve: int â€“ å„æ›²ç·šã®è§£åƒåº¦
- pipe_radius: float â€“ Pipeã®å¤ªã•

## âœ… Outputs

- results: list of Brep â€“ æ³¢æ‰“ã¤ç¸¦æ›²ç·šã¨ã€ãã‚Œã‚’æ¨ªæ–¹å‘ã§ã¤ãªãå††ã«æ²¿ã£ãŸPipeæ§‹é€ 

## âœ… Code

```python
import Rhino.Geometry as rg
import math

# === ðŸ”§ å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¾‹ ===
# radius = 100.0           # çƒã®åŠå¾„
# amp = 2.0                # æ³¢ã®æŒ¯å¹…ï¼ˆç¸¦æ–¹å‘ï¼‰
# wave_cycles = 20         # æ³¢ã®ç¹°ã‚Šè¿”ã—æ•°ï¼ˆçµŒç·šæ–¹å‘ï¼‰
# res_theta = 60           # çµŒç·šæ–¹å‘ã®åˆ†å‰²æ•°ï¼ˆç¸¦ï¼‰
# res_curve = 100          # æ›²ç·šåˆ†è§£èƒ½
# pipe_radius = 2.0        # Pipeã®åŠå¾„

# === ðŸ“ åŸºæœ¬è¨­å®š
circumference = 2 * math.pi * radius
freq = wave_cycles * 2 * math.pi / circumference

# === ðŸ§µ ç¸¦æ–¹å‘ã®æ³¢æ‰“ã¤æ›²ç·šï¼ˆçµŒç·šæ–¹å‘ï¼‰
vertical_curves = []
for i in range(res_theta):
    theta = (2 * math.pi) * i / res_theta
    phase = math.pi if i % 2 == 1 else 0.0
    points = []
    for j in range(res_curve + 1):
        t = float(j) / res_curve
        phi = math.pi * t
        arc_len = t * circumference
        r = radius + math.sin(arc_len * freq + phase) * amp
        x = r * math.sin(phi) * math.cos(theta)
        y = r * math.sin(phi) * math.sin(theta)
        z = r * math.cos(phi)
        points.append(rg.Point3d(x, y, z))
    curve = rg.Curve.CreateInterpolatedCurve(points, 3)
    vertical_curves.append(curve)

# === ðŸŽ¯ ç·¯ç·šï¼ˆæ³¢ã®å±±è°·ä½ç½®ã«å††ã‚’é…ç½®ï¼‰
num_peaks = int(wave_cycles * 2)
horizontal_curves = []
for k in range(num_peaks):
    t = (k + 0.5) / (num_peaks)
    phi = math.pi * t
    r = radius * math.sin(phi)
    z = radius * math.cos(phi)
    if abs(r) > 1e-6:
        circle = rg.Circle(rg.Plane(rg.Point3d(0, 0, z), rg.Vector3d.ZAxis), r)
        horizontal_curves.append(circle.ToNurbsCurve())

# === âœ… PipeåŒ–
curves = vertical_curves + horizontal_curves
results = []
for c in curves:
    pipes = rg.Brep.CreatePipe(c, pipe_radius, False, rg.PipeCapMode.Round, True, 0.001, 0.001)
    if pipes:
        results.extend(pipes)
```